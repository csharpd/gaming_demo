<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Gaming</title>
<!--   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" > -->
<link rel="stylesheet" href="assets/css/app.css" type="text/css">
<script type="text/javascript" src="assets/javascript/jquery.js"></script>
<script src='https://dd6zx4ibq538k.cloudfront.net/smartserve-3754.js'></script>
<link href="SpryAssets/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />
<!--[if lte IE 7]>
<style>
.content { margin-right: -1px; } /* this 1px negative margin can be placed on any of the columns in this layout with the same corrective effect. */
ul.nav a { zoom: 1; }  /* the zoom property gives IE the hasLayout trigger it needs to correct extra whiltespace between the links */
</style>
<![endif]-->
<script src="SpryAssets/SpryMenuBar.js" type="text/javascript"></script>
</head>

<body>

<div class="container">
  <div class="header">
		<div class="headerTop">
		<div id="Insert_logo">
		<img class="logo" src="http://www.qubit.com/sites/all/themes/qubit/logo.png" alt="Insert Logo Here" name="Insert_logo" height="50"  />
		<h1>E-Gaming</h1>
		</div>
		<div class="loginUser">
			<nav>

				<div class="login"><input  type="text" name="loginuserid" id="loginuserid" value="" required>
				<button type="button" value="login" id="login" onclick="login()">Login</button>
			</div>
				<div class="user-id">User ID: <input class="loginuser" type="text" name="user-id" id="user-id" value="" readonly required>
					<p>Funds: <input class="loginuser" type="text" name="userFunds" id="userFunds" value=200 readonly required></p>
					<button type="button" value="logout" id="logout" onclick="document.location.reload(true)">Logout</button></div>
			</nav>
		</div>
	</div>




<!-- end .header --></div>
  <div class="sidebar1">
    <ul class="nav">
      <li><a id="football" href="#">Football</a></li>
      <li><a id="tennis" href="#">Tennis</a></li>
      <li><a id="americanFootball" href="#">American football</a></li>
      <li><a id="Horses" href="#">Horses</a>    <!-- end .sidebar1 --></li>
    </ul>
  </div>
  <div class="content">
		<div class="menuTop">
	  <ul id="MenuBar1" class="MenuBarHorizontal">
	      <li><a href="#">Sports</a></li>
	      <li><a href="#">Casino</a></li>
	      <li><a href="#">Bingo</a></li>
	      <li><a href="#">Slots</a></li>
	    </ul>
	  </div>
		<form method="post" id="betting-form">


			<div class="options">
				<div id="football-bets" class="bets-section">
					<p><h2> Football</h2></p>
					<h3> Arsenal vs. Man U</h3>
					<div class="football-bet">
						<table>
							<tr>
								<th>H</th>
								<th>D</th>
								<th>A</th>
							</tr>
							<tr>
								<td><input type="radio" class="bet" name="bet" value=3 id='a_v_mu_h_15/5' onclick="sendQPegBet()"> 15 / 5</td>
								<td><input type="radio" class="bet" name="bet" value=1.4 id='a_v_mu_d_7/5' onclick="sendQPegBet()"> 7 / 5</td>
								<td><input type="radio" class="bet" name="bet" value=1.75 id='a_v_mu_a_7/5' onclick="sendQPegBet()"> 7 / 4</td>
							</tr>
						</table>
					</div>

					<h3> Liverpool vs. Chelsea</h3>
					<div class="football-bet" >
						<table>
							<col width="80">
							<tr>
								<th>H</th>
								<th>D</th>
								<th>A</th>
							</tr>
							<tr>
								<td><input type="radio" class="bet" name="bet" value=2.4 id='l_v_c_h_12/5' onclick="sendQPegBet()"> 12 / 5</td>
								<td><input type="radio" class="bet" name="bet" value=1.25 id='l_v_c_d_5/4' onclick="sendQPegBet()"> 5 / 4</td>
								<td><input type="radio" class="bet" name="bet" value=1.75 id='l_v_c_a_7/4' onclick="sendQPegBet()"> 7 / 4</td>
							</tr>
						</table>
					</div>
					<h3> Man City vs. West Ham</h3>
					<div class="football-bet">
						<table>
							<tr>
								<th>H</th>
								<th>D</th>
								<th>A</th>
							</tr>
							<tr>
								<td><input type="radio" class="bet" name="bet" value=2.6 id='mc_v_wh_h_13/5' onclick="sendQPegBet()"> 13 / 5</td>
								<td><input type="radio" class="bet" name="bet" value=1.4 id='mc_v_wh_d_7/5' onclick="sendQPegBet()"> 7 / 5</td>
								<td><input type="radio" class="bet" name="bet" value=1.75 id='mc_v_wh_a_7/5' onclick="sendQPegBet()"> 7 / 5</td>
							</tr>
						</table>
					</div>
				</div>
			</div>


		</form>
  <!-- end .content --></div>
  <div class="sidebar2">
		<div class="stake-section">

			<div class="stake-details">
				<label for="stake">Stake</label>
				<input type="text" id="stake" name="stake" value=0 required>
				<button type="button" id="place" value="Place Bet" onclick="sendegBetSlipItem_egBetslipSummary_egBetslipTransactionSummary()">Place Bet!</button>
				<p><label for="potential">Potential</label>
				<input type="text" id="potential" name="stake" value=0 required readonly></p>

			</div>
		</div>

		<div class="betslip-section" id = "betslip">
			<h3 class="betslip">Betslip</h3>
			<div class="betslip-details" >
				<table style="width:100%">
				<tr>
					<td><label for="competition">Competition:</label></td>
					<td><input type="text" name="competition" id="BScompetition" value="" readonly></td>
				</tr>
				<tr><td><label for="event">Event:</label></td>
				<td><input type="text" name="event" id="BSevent" value="" readonly></td></tr>
				<tr><td><label for="selection">Selection:</label></td>
				<td><input type="text" name="selection" id="BSselection" value="" readonly></td></tr>
				<tr><td><label for="odd">Odd:</label></td>
				<td><input type="text" name="odd" id="BSodd" value="" readonly></td></tr>
				<tr><td><label for="stake">Total Stake:</label></td>
				<td><input type="text" name="stake" id="BSstake" value="" readonly></td></tr>
				<tr><td><label for="potentialReturn">Total Potential Return:</label></td>
				<td><input type="text" name="potentialReturn" id="BSpotentialReturn" value="" readonly></td></tr>
			</table>
				<button type="button" value="home" onclick="document.location.reload(true)">Place another Bet</button>
			</div>
		</div>

		<!-- end .sidebar2 --></div>
  <div class="footer">

		<!-- end .footer --></div>
  <!-- end .container --></div>
<script type="text/javascript">
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});


var betArray = []
var betSport = ''
var betCompetition = 'Premier League'
betArray['betEvent'] = ''
betArray['betEventId'] = ''
betArray['betSelection'] = ''
var betOddDecimal = 0
var betPotential = 0
var betStake = 0
var betIdApp = ''
var userId = ''
var egUser = {}
var egBet = {}
var egBetslipItem = {}
window.universal_variable = {egUser}
window.console.log(userId);

var timestamp = Math.round(+new Date()/1000)
var selectionIdR = ''

$("#login").click(function () {
		userId = $('#user-id').val()
		$('.user-id').css('display', 'block');
		sendQPUser(userId);
})

$("#place").click(function () {
		$('#betslip').css('display', 'block');
})

$("#football").click(function () {
		$('#football-bets').css('display', 'block');
		$('.stake-section').css('display', 'block');
})

$("input[name='selection']").click(function () {
		$('.stake-section').css('display', 'block');
		$('#football-bets').css('display', ($(this).val() === 'Football') ? 'block' : 'none');
})

function login(){
	$('#user-id').val($('#loginuserid').val());
	$('.login').hide()
}

		/*$( "form" ).on( "submit" function( event ) {
			var qubit = $( this ).serializeArray();
			betSport = qubit[1].value;
			betOddDecimal = qubit[2].value;
			betStake = qubit[3].value;




		},sendegBetSlipItem_egBetslipSummary_egBetslipTransactionSummary());*/


		function sendQPUser (user) {

			/*if (window.uv && window.uv.emit) {
				 console.log("have UV");
				 console.log(user);
				 window.uv.emit('egFund',{
					 "user": {
						 "lastName": "Ramirez",
						 "gender": "Male",
						 "hasTransacted": true,
						 "loyalty": {
							 "id": "8989752-223",
							 "tier": "silver",
							 "membershipType": "Clearsky Rewards"
						 },
						 "firstSession": false,
						 "isGuest": false,
						 "currency": "GBP",
						 "address": {
							 "addressee": "Jonatan Ramirez",
							 "company": "Amce Inc",
							 "lines": [
								 "Flat 12",
								 "123 High Street"
							 ],
							 "locality": "London",
							 "region": "London",
							 "postalCode": "SE6 2AA",
							 "country": "United Kingdom",
							 "countryCode": "GB"
						 },
						 "username": userId,
						 "phoneNumber": "07595222465",
						 "title": "Mr",
						 "language": "en-us",
						 "id": userId,
						 "firstName": "Jonatan",
						 "balance": {
							 "value": 200,
							 "currency": "GBP"
						 },
						 "email": "jonatan@qubit.com"
					 },
				"type": "deposit",
				"amount": {
					"value": 200,
					"currency": "GBP"
				},
				"method": "CreditCard"
				})
		}*/
egUser = {
						"user": {
							"lastName": "Ramirez",
							"gender": "Male",
							"hasTransacted": true,
							"loyalty": {
								"id": "8989752-223",
								"tier": "silver",
								"membershipType": "Clearsky Rewards"
							},
							"firstSession": false,
							"isGuest": false,
							"currency": "GBP",
							"address": {
								"addressee": "Jonatan Ramirez",
								"company": "Amce Inc",
								"lines": [
									"Flat 12",
									"123 High Street"
								],
								"locality": "London",
								"region": "London",
								"postalCode": "SE6 2AA",
								"country": "United Kingdom",
								"countryCode": "GB"
							},
							"username": userId,
							"phoneNumber": "07595222465",
							"title": "Mr",
							"language": "en-us",
							"id": userId,
							"firstName": "Jonatan",
							"balance": {
								"value": 200,
								"currency": "GBP"
							},
							"email": "jonatan@qubit.com",
							"firstLogin": false,
  						"type": "Logging in on desktop."
						}
					}
			 if (window.uv && window.uv.emit) {
					console.log("have UV");
					console.log(user);
					window.uv.emit('egUser',egUser)
			 }
			 if (window.uv && window.uv.emit) {
					console.log("have UV");
					console.log(user);
					window.uv.emit('egUserLogin',egUser)
			 }
		 }

		 function sendQPegBet () {

			 betSport = $('input[name=selection]:checked').val()
			 betStake = parseFloat($('#stake').val())
			 betOddDecimal = parseFloat($('input[name=bet]:checked', '#football-bets').val())
			 betPotential = Math.round(((betOddDecimal * betStake) + betStake)*100)/100
			 selectionIdR = $('input[name=bet]:checked').attr('id')
			 var betArrayB = getValues (selectionIdR)
			 var betEvent = betArray['betEvent']
			 var betEventId = betArray['betEventId']
			 var betSelection = betArray['betSelection']
			 $('#potential').val(betPotential)

			 egBet = {
					"bet": {
						"betId": betEventId + betStake.toString() + betPotential.toString() + timestamp,
						"price": {
							"value": betStake,
							"currency": "GBP"
						},
						"potentialReturn": {
							"value": betPotential,
							"currency": "GBP"
						},
						"odds": betOddDecimal,
						"startTime": timestamp,
						"multiBet": true,
						"receiptId": "123",
						"betType": "Single",
						"inplay": true,
						"sport": betSport,
						"competition": betCompetition,
						"eventName": betEvent,
						"eventId": betEventId,
						"selection": betSelection,
						"selectionId": betSelection,
						"marketName": "Win-Draw-Win",
						"marketId": "12345",
						"originalPrice": {
							"value": betPotential,
							"currency": "GBP"
						}
					},
					"eventType": "detail",
					"action": "Click"
				}

				if (window.uv && window.uv.emit) {
					 console.log("have UV");
					 console.log(userId);
					 window.uv.emit('egBet',egBet);
				}
				if (window.uv && window.uv.emit) {
					 console.log("have UV");
					 console.log(userId);
					 window.uv.emit('egBetAction',egBet);
				}

			}

			function sendegBetSlipItem_egBetslipSummary_egBetslipTransactionSummary () {

				betSport = $('input[name=selection]:checked').val()
				betStake = parseFloat($('#stake').val())
				betOddDecimal = parseFloat($('input[name=bet]:checked', '#football-bets').val())
				betPotential = Math.round(((betOddDecimal * betStake) + betStake)*100)/100
				selectionIdR = $('input[name=bet]:checked').attr('id')
				var betArrayB = getValues (selectionIdR)
				var betEvent = betArray['betEvent']
				var betEventId = betArray['betEventId']
				var betSelection = betArray['betSelection']
				var betIdApp = betEventId + betStake.toString() + betPotential.toString() + timestamp


				$('#BScompetition').val(betCompetition)
				$('#BSevent').val(betEvent)
				$('#BSodd').val(betOddDecimal)
				$('#BSpotentialReturn').val(betPotential)
				$('#BSselection').val(betSelection)
				$('#BSstake').val(betStake)
				$('#userFunds').val(parseFloat($('#userFunds').val())-betStake)

				egBetslipItem = {
					"betslip": {
							"id": betIdApp,
							"totalStake": {
									"value": betStake,
									"currency": "GBP"
							},
							"quantity": 1,
							"totalPotential": {
									"value": betPotential,
									"currency": "GBP"
							},
							"subtotal": {
									"value": betStake,
									"currency": "GBP"
							},
							"tax": {
								"value": 0,
								"currency": "GBP"
							},
							"total": {
									"value": betStake,
									"currency": "GBP"
							},
							"subtotalIncludingTax": {
									"value": betStake,
									"currency": "GBP"
							}
					},
					 "bet": {
							 "betId": betIdApp,
							 "price": {
									 "value": betStake,
									 "currency": "GBP"
							 },
							 "potentialReturn": {
									 "value": betPotential,
									 "currency": "GBP"
							 },
							 "odds": betOddDecimal,
							 "startTime": timestamp,
							 "multiBet": false,
							 "receiptId": betIdApp,
							 "betType": "Single",
							 "inplay": true,
							 "sport": betSport,
							 "competition": betCompetition,
							 "eventName": betEvent,
							 "eventId": betEventId,
							 "selection": betSelection,
							 "selectionId": betSelection,
							 "marketName": "Win-Draw-Win",
							 "marketId": "12345",
							 "originalPrice": {
									 "value": betPotential,
									 "currency": "GBP"
							 }
					 },
					 "subtotal": {
							 "value": betPotential,
							 "currency": "GBP"
					 },
					 "subtotalIncludingTax": {
							 "value": betPotential,
							 "currency": "GBP"
					 }
				 }

				 if (window.uv && window.uv.emit) {
						console.log("have UV");
						console.log(userId);
						window.uv.emit('egBetslipItem', egBetslipItem);
				 }
				 if (window.uv && window.uv.emit) {
						console.log("have UV");
						console.log(userId);
						window.uv.emit('egBetslipSummary',{
							"betslip": {
									"id": betIdApp,
									"totalStake": {
											"value": betStake,
											"currency": "GBP"
									},
									"quantity": 1,
									"totalPotential": {
											"value": betPotential,
											"currency": "GBP"
									},
									"subtotal": {
											"value": betStake,
											"currency": "GBP"
									},
									"total": {
											"value": betStake,
											"currency": "GBP"
									},
									"subtotalIncludingTax": {
											"value": betStake,
											"currency": "GBP"
									}
							}
					});
				}
				if (window.uv && window.uv.emit) {
					 console.log("have UV");
					 console.log(userId);
					 window.uv.emit('egBetslipTransactionSummary',{
							"basket": {
									"id": betIdApp,
									"totalStake": {
											"value": betStake,
											"currency": "GBP"
									},
									"quantity": 1,
									"totalPotential": {
											"value": betPotential,
											"currency": "GBP"
									},
									"subtotal": {
											"value": betStake,
											"currency": "GBP"
									},
									"total": {
											"value": betStake,
											"currency": "GBP"
									},
									"subtotalIncludingTax": {
											"value": betStake,
											"currency": "GBP"
									}
							},
							"betslip": {
									"id": betIdApp,
									"totalStake": {
											"value": betStake,
											"currency": "GBP"
									},
									"quantity": 1,
									"totalPotential": {
											"value": betPotential,
											"currency": "GBP"
									},
									"subtotal": {
											"value": betStake,
											"currency": "GBP"
									},
									"total": {
											"value": betStake,
											"currency": "GBP"
									},
									"subtotalIncludingTax": {
											"value": betStake,
											"currency": "GBP"
									}
							},
							"transaction": {
									"id": betIdApp,
									"firstTransaction": false,
									"paymentType": "Credit Card",
									"billingAddress": {
											"addressee": "Jonatan Ramirez",
											"company": "Amce Inc",
											"lines": [
											"Flat 12",
											"123 High Street"
										],
											"locality": "London",
											"region": "London",
											"postalCode": "SE6 2AA",
											"country": "United Kingdom",
											"countryCode": "GB"
									},
									"parentId": betIdApp
							}
					});
				}

				if (window.uv && window.uv.emit) {
					 console.log("have UV");
					 console.log(userId);
					 window.uv.emit('egBetslipItemTransaction',{
							"bet": {
									"betId": betIdApp,
									"price": {
											"value": betStake,
											"currency": "GBP"
									},
									"potentialReturn": {
											"value": betPotential,
											"currency": "GBP"
									},
									"odds": betOddDecimal,
									"startTime": timestamp,
									"multiBet": true,
									"receiptId": betIdApp,
									"betType": "Single",
									"inplay": true,
									"sport": betSport,
									"competition": betCompetition,
									"eventName": betEvent,
									"eventId": betEventId,
									"selection": betSelection,
									"selectionId": betSelection,
									"marketName": "Win-Draw-Win",
									"marketId": "12345",
									"originalPrice": {
											"value": betPotential,
											"currency": "GBP"
									}
							},
							"subtotal": {
									"value": betPotential,
									"currency": "GBP"
							},
							"subtotalIncludingTax": {
									"value": betPotential,
									"currency": "GBP"
							},
							"betslip": {
									"id": betIdApp,
									"totalStake": {
											"value": betStake,
											"currency": "GBP"
									},
									"quantity": 1,
									"totalPotential": {
											"value": betPotential,
											"currency": "GBP"
									},
									"subtotal": {
											"value": betStake,
											"currency": "GBP"
									},
									"total": {
											"value": betStake,
											"currency": "GBP"
									},
									"subtotalIncludingTax": {
											"value": betStake,
											"currency": "GBP"
									}
							},
							"transaction": {
									"id": betIdApp,
									"firstTransaction": false,
									"paymentType": "Credit Card",
									"billingAddress": {
											"addressee": "Jonatan Ramirez",
											"company": "Amce Inc",
											"lines": [
													"Flat 12",
													"123 High Street"
											],
											"locality": "London",
											"region": "London",
											"postalCode": "SE6 2AA",
											"country": "United Kingdom",
											"countryCode": "GB"
									},
									"parentId": betIdApp
							}
						});
				}
		}




function getValues (selectionIdR) {
if (selectionIdR != null){
switch(selectionIdR) {
	 case 'a_v_mu_h_15/5':
		 betArray['betEvent'] = 'Arsenal v Man United'
		 betArray['betSelection'] = 'Arsenal'
		 betArray['betEventId'] = '1'
		 break;
	 case 'a_v_mu_d_7/5':
		 betArray['betEvent'] = 'Arsenal v Man United'
		 betArray['betSelection'] = 'Draw'
		 betArray['betEventId'] = '1'
		 break;
	 case 'a_v_mu_a_7/5':
		 betArray['betEvent'] = 'Arsenal v Man United'
		 betArray['betSelection'] = 'Man United'
		 betArray['betEventId'] = '1'
		 break;
	 case 'l_v_c_h_12/5':
		 betArray['betEvent'] = 'Liverpool v Chelsea'
		 betArray['betSelection'] = 'Liverpool'
		 betArray['betEventId'] = '2'
		 break;
	 case 'l_v_c_d_5/4':
		 betArray['betEvent'] = 'Liverpool v Chelsea'
		 betArray['betSelection'] = 'Draw'
		 betArray['betEventId'] = '2'
		 break;
	 case 'l_v_c_a_7/4':
		 betArray['betEvent'] = 'Liverpool v Chelsea'
		 betArray['betSelection'] = 'Chelsea'
		 betArray['betEventId'] = '2'
		 break;
	 case 'mc_v_wh_h_13/5':
		 betArray['betEvent'] = 'Man City v West Ham'
		 betArray['betSelection'] = 'Man City'
		 betArray['betEventId'] = '3'
		 break;
	 case 'mc_v_wh_d_7/5':
		 betArray['betEvent'] = 'Man City v West Ham'
		 betArray['betSelection'] = 'Draw'
		 betArray['betEventId'] = '3'
		 break;
	 case 'mc_v_wh_a_7/5':
		 betArray['betEvent'] = 'Man City v West Ham'
		 betArray['betSelection'] = 'West Ham'
		 betArray['betEventId'] = '3'
		 break;
	 default:

}
return betArray
}
}

</script>
</body>
</html>
